<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Plan â€“ Register</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">
</head>
<body class="d-flex justify-content-center align-items-center vh-100 bg-light">

<div class="card shadow p-4 register-card" style="width: 500px;">

    <h3 class="text-center mb-4">Register Account</h3>

    <form id="registerForm">

        <div class="mb-3">
            <label class="form-label"><b>Full Name</b></label>
            <input type="text" id="fullName" class="form-control" placeholder="Full Name" required>
        </div>

        <div class="row mb-3">
            <div class="col">
                <label class="form-label"><b>Birthday</b></label>
                <input type="date" id="birthday" class="form-control" required>
            </div>
            <div class="col">
                <label class="form-label"><b>Email</b></label>
                <input type="email" id="email" class="form-control" placeholder="Enter Email" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col">
                <label class="form-label"><b>Phone Number</b></label>
                <input type="tel" id="phone" class="form-control" placeholder="Phone Number" required>
            </div>
            <div class="col">
                <label class="form-label"><b>Education</b></label>
                <select id="studentType" class="form-select" required>
                    <option value="">Choose</option>
                    <option value="Elementary School">Elementary School</option>
                    <option value="Secondary School">Secondary School</option>
                    <option value="University">University</option>
                </select>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col">
                <label class="form-label"><b>Password</b></label>
                <input type="password" id="password" class="form-control" placeholder="Enter Password" required>
            </div>
            <div class="col">
                <label class="form-label"><b>Repeat Password</b></label>
                <input type="password" id="psw2" class="form-control" placeholder="Repeat Password" required>
            </div>
        </div>

        <p id="errorReg" class="text-danger small"></p>

        <button type="submit" class="btn btn-primary w-100 mb-2">Register</button>
        <a href="login.html" class="btn btn-outline-secondary w-100">Back to Login</a>

    </form>
</div>

<script>
document.getElementById("registerForm").addEventListener("submit", function(e){
    e.preventDefault();

    const fullName = document.getElementById("fullName").value.trim();
    const birthday = document.getElementById("birthday").value;
    const studentType = document.getElementById("studentType").value;
    const email = document.getElementById("email").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const pw1 = document.getElementById("password").value;
    const pw2 = document.getElementById("psw2").value;

    if(pw1 !== pw2){
        document.getElementById("errorReg").innerText = "Passwords do not match!";
        return;
    }

    let users = JSON.parse(localStorage.getItem("users")) || [];

    const existingUser = users.find(u => u.email === email);
    if(existingUser){
        document.getElementById("errorReg").innerText = "Email already registered!";
        return;
    }

    const newUser = {
        fullName,
        birthday,
        studentType,
        email,
        phone,
        password: pw1
    };
    users.push(newUser);

    localStorage.setItem("users", JSON.stringify(users));

    alert("Account successfully created! Please login.");
    window.location.href = "login.html";
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>